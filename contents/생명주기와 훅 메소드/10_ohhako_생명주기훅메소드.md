# 생명주기

- 349.p

- 컴포넌트와 디렉티브(지시자)는 생명주기를 갖는다.
- Angular가 컴포넌트,디렉티브를 생성하고 소멸되기 까지 생명주기를 관리
- 생명주기 관리 작업: 생성/렌더링/ 프로퍼티 변화 체크/DOM 제어
- 개발자는 생명주기 훅 메서드(lifecycle hook method)를 구현하여 각 단계에 처리할 행위를 정의한다.

## 생명주기 훅 메서드

- ng- 가 붙은 추상메서드를 제공한다.

<img src ="../imgs/lifeCycleHookMethod.png">

- constructure: 클래스인 컴포넌트, 디렉티브 생성함.
  - Angular가 관리하는 메소드가 아니다
- ngOnChanges: 부모 컴포넌트에서 자식 컴포넌트의 `입력 프로퍼티로 바인딩한 값이 변경될 때마다` 실행
- ngOnInit: ngOnChanges 이후, 모든 프로퍼티 값이 초기화가 완료된 시점에 딱 한번 호출
  - Angular에서 상태를 변경한 시점에 추가로 변경한 상태를 가공처리 할때 혹은 외부 API를 호출하는 등 상태 변경에 종속적인 로직 실행 필요시 사용
- ngDoCheck: 컴포넌트,디렉티브의 `상태 변화가 발생할 때마다` 호출
  - DOM이벤트/Timer/tick/Ajax 같은 비동기식 처리가 수행될 때 `변화 감지 로직` 을 실행하는데 이때 호출되는 메서드
- ngAfterContentInit: ngContent 디렉티브를 사용해 외부 콘텐츠를 `컴포넌트 뷰`에 `콘텐트 프로젝션` 한 이후 호출.
  - 첫 ngDoCheck 호출 이후 딱 한번 실행
  - 컴포넌트 전용
- ngAfterContentChecked: `콘텐트 프로젝션`에 의해 부모 컴포넌트가 전달한 부모 컴포넌트 템플릿 조각을 체크한 후 호출
  - 컴포넌트 전용
- ngAfterViewInit: 컴포넌트 , 자식 컴포넌트 `뷰 초기화` 이후 호출
  - 컴포넌트 전용
- ngAfterViewCheckod: 컴포넌트, 자식 컴포넌트 `뷰 체크` 이후 호출
  - 컴포넌트 전용
- ngOnDestroy: 컴포넌트, 디렉티브 `소멸 직전` 호출'

## ngOnChanges VS ngDoCheck

|                                                | ngOnChanges             | ngDoCheck               |
| ---------------------------------------------- | ----------------------- | ----------------------- |
| 호출                                           | 입력 프로퍼티 참조 변경 | 컴포넌트 모든 상태 변화 |
| 입력프토퍼티값 가진 <BR> 컴포넌트 호출 시 동작 | O                       | X                       |
| 객체 프로퍼티<BR> 변경 시 동작                 | X                       | O                       |

### 용어 정리

- RxJS(Reactive Extension for JavaScript): 라이브러리. 이벤트 스트림과 데이터를 쉽게 만들고 다룰 수 있도록 도와주는 `라이브러리`
